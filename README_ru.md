# –°–µ—Ä–≤–∏—Å –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ + QR

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –∏ QR-–∫–æ–¥–æ–≤, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ Yii2 Framework.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö URL –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ QR-–∫–æ–¥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è URL** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–æ–∫
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π** - –æ–¥–∏–Ω URL = –æ–¥–Ω–∞ –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤** - –∑–∞–ø–∏—Å—å IP, User-Agent, —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
- **–°—á–µ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤** - –ø–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–µ
- **AJAX –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä** - —É–¥–æ–±–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Yii2 Framework (PHP 7.4+)
- **Database**: MySQL 5.7+
- **Frontend**: jQuery, Bootstrap 5
- **QR-–∫–æ–¥—ã**: Endroid QR Code Library
- **–í–∞–ª–∏–¥–∞—Ü–∏—è URL**: cURL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
test/
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db.php             # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ web.php            # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ controllers/           # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ SiteController.php # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ RedirectController.php # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ QrController.php   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤
‚îú‚îÄ‚îÄ models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ ShortLink.php     # –ú–æ–¥–µ–ª—å –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ LinkClick.php     # –ú–æ–¥–µ–ª—å –ª–æ–≥–æ–≤ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
‚îú‚îÄ‚îÄ views/               # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ site/
‚îÇ       ‚îî‚îÄ‚îÄ index.php    # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ migrations/          # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ m240728_210000_create_short_link_tables.php
‚îú‚îÄ‚îÄ web/                # –í–µ–±-–∫–æ—Ä–µ–Ω—å
‚îÇ   ‚îú‚îÄ‚îÄ qr-codes/       # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è QR-–∫–æ–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ .htaccess       # –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ URL
‚îî‚îÄ‚îÄ database.sql        # SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ë–î
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`/`) - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- **–ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ** (`/s/{code}`) - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL
- **QR-–∫–æ–¥** (`/qr/{code}`) - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `short_links`
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `original_url` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ (TEXT, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `short_code` - –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–¥ (VARCHAR(10), —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `qr_code_path` - –ø—É—Ç—å –∫ QR-–∫–æ–¥—É
- `clicks_count` - —Å—á–µ—Ç—á–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –¢–∞–±–ª–∏—Ü–∞ `link_clicks`
- `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `short_link_id` - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ short_links
- `ip_address` - IP –∞–¥—Ä–µ—Å –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
- `user_agent` - User Agent –±—Ä–∞—É–∑–µ—Ä–∞
- `referer` - —Ä–µ—Ñ–µ—Ä–µ—Ä
- `clicked_at` - –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–∞

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- PHP 7.4 –∏–ª–∏ –≤—ã—à–µ
- MySQL 5.7 –∏–ª–∏ –≤—ã—à–µ
- Composer
- –í–µ–±-—Å–µ—Ä–≤–µ—Ä (Apache/Nginx) –∏–ª–∏ PHP –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

### –ü–æ—à–∞–≥–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
   ```bash
   git clone <repository-url>
   cd test
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   ```bash
   composer install
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
   ```bash
   # –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü
   mysql -u root -p < database.sql
   
   # –ò–ª–∏ —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ Yii2
   php yii migrate
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/db.php` (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î)
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/web.php` (–æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞**
   - –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ `web/`
   - –í–∫–ª—é—á–∏—Ç–µ mod_rewrite –¥–ª—è Apache
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PHP –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:
     ```bash
     php -S localhost:8081 -t web
     ```

6. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**
   ```bash
   chmod 777 web/qr-codes
   ```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`config/db.php`)
```php
return [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=localhost;dbname=yii2basic',
    'username' => 'root',
    'password' => 'root',
    'charset' => 'utf8',
];
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`config/web.php`)
- `cookieValidationKey` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ cookies
- `urlManager` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—Ä–∞—Å–∏–≤—ã—Ö URL
- `db` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏**
   - –í–≤–µ–¥–∏—Ç–µ URL –≤ –ø–æ–ª–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å"
   - –ü–æ–ª—É—á–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É –∏ QR-–∫–æ–¥

2. **–ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É –≤–∏–¥–∞ `http://domain.com/s/ABC123`
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL

3. **QR-–∫–æ–¥**
   - –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –∫–∞–º–µ—Ä–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `http://domain.com/qr/ABC123`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- CSRF –∑–∞—â–∏—Ç–∞ –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ URL —á–µ—Ä–µ–∑ cURL
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –°—á–µ—Ç—á–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–µ
- –õ–æ–≥–∏ —Å IP –∞–¥—Ä–µ—Å–∞–º–∏ –∏ User Agent
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config/db.php`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MySQL —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î

### –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `web/qr-codes/`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Endroid QR Code

### –û—à–∏–±–∫–∞ "Method Not Allowed"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `.htaccess`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ mod_rewrite –≤–∫–ª—é—á–µ–Ω

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π.

---

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [README_SHORT_LINKS.md](README_SHORT_LINKS.md) 